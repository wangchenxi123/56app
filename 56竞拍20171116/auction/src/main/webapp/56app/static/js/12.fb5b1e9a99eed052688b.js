webpackJsonp([12],{131:function(t,e,s){s(309);var a=s(6)(s(236),s(357),"data-v-3ba0f0a1",null);t.exports=a.exports},162:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NDYgNjkiPjxkZWZzPjxzdHlsZT4uY2xzLTF7ZmlsbDojZmNjOGM4O30uY2xzLTJ7ZmlsbDojYmZkOGY3O308L3N0eWxlPjwvZGVmcz48dGl0bGU+Ym9yZGVyLWxldHRlcjwvdGl0bGU+PGcgaWQ9IuWbvuWxgl8yIiBkYXRhLW5hbWU9IuWbvuWxgiAyIj48ZyBpZD0iaWNvbiI+PHBvbHlnb24gY2xhc3M9ImNscy0xIiBwb2ludHM9IjE4OCA2OSAxMTkgNjkgMTM5IDAgMjA4IDAgMTg4IDY5Ii8+PHBvbHlnb24gY2xhc3M9ImNscy0yIiBwb2ludHM9IjY5IDY5IDAgNjkgMjAgMCA4OSAwIDY5IDY5Ii8+PHBvbHlnb24gY2xhc3M9ImNscy0xIiBwb2ludHM9IjQyNiA2OSAzNTcgNjkgMzc3IDAgNDQ2IDAgNDI2IDY5Ii8+PHBvbHlnb24gY2xhc3M9ImNscy0yIiBwb2ludHM9IjMwNyA2OSAyMzggNjkgMjU4IDAgMzI3IDAgMzA3IDY5Ii8+PC9nPjwvZz48L3N2Zz4="},214:function(t,e){function s(t){function e(t){if(null!=t&&void 0!=t&&"undefined"!=t){var e=t.parentNode;e&&e.removeChild(t)}}var s={zindex:1e4,backTxt:"返回竞拍"};if(t){var a=typeof t;"object"==a?(t.zindex&&(s.zindex=t.zindex),t.backTxt&&(s.backTxt=t.backTxt)):"string"==a?s.backTxt=t:"number"==a&&(s.zindex=t)}return this.cfg=s,this.baseid=(new Date).getTime()+"_"+(Math.random()+"").replace(".",""),this.iframeBox="iframeBox"+this.baseid,this.maskid="mask"+this.baseid,this.maskzIndex=this.cfg.zindex+1,this.iframeBoxzIndex=this.cfg.zindex+2,this.createIframeBox=function(t){var e=document.createElement("div");e.id=this.iframeBox,e.style.cssText="width:100%; height:100%;position:fixed;z-index:"+this.iframeBoxzIndex+";overflow:hidden;left:0;top:0";var s=navigator.userAgent;s.indexOf("Android")>-1||s.indexOf("Linux")>-1?(e.style["-webkito-overflow-scrolling"]="touch",e.style.overflow="hidden"):(e.style["-webkit-overflow-scrolling"]="touch",e.style["overflow-y"]="scroll"),document.getElementsByTagName("body").item(0).appendChild(e);var a=document.createElement("iframe");a.style.cssText="background-color:#fff;width:100%; height:100%;border:0",a.src=t,e.appendChild(a)},this.createBack=function(t){var s=this.cfg.backTxt,a=document.createElement("div");a.id="iframeBackBtn",a.setAttribute("data-iframebox",this.iframeBox),a.setAttribute("data-maskid",this.maskid),a.style.cssText="width:70px; height:30px;line-height: 30px;text-align:center;font-size:12px;color:#fff;background-color:rgba(0,0,0,0.4);position:fixed;border-radius:4px;left:10px;bottom:20%;fontFamily:Microsoft YaHei",a.onclick=function(){e(document.getElementById(this.getAttribute("data-iframebox"))),e(document.getElementById(this.getAttribute("data-maskid"))),t&&t()},a.appendChild(document.createTextNode(s)),document.getElementById(this.iframeBox).appendChild(a)},this.mask=function(){var t=document.createElement("div");t.id=this.maskid,t.style.cssText="z-index:"+this.maskzIndex+";width: 100%;height: 100%;top: 0px;left: 0px;background-color: rgba(0, 0, 0, 0);opacity: 0.6;cursor: wait;position: fixed;",document.getElementsByTagName("body").item(0).appendChild(t)},this.open=function(t,e){this.mask(),this.createIframeBox(t),this.createBack(e)},this}window.iframePay=new s},236:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(214);s.n(a);e.default={name:"orderDetail",data:function(){return{orderId:"",resource:{addressBean:{}},addrPopupVisible:!1,addResource:{},selectAddrressId:"",confirming:!1,payPopupVisible:!1,frpId:"ALIPAY_H5",options:[{label:"支付宝",value:"ALIPAY_H5"},{label:"QQ钱包",value:"QQ_WALLET"},{label:"网银支付",value:"ONLINE_BANKING"}]}},computed:{stateIndex:function(){var t=0;switch(this.resource.order_state){case"WAITING_PAYMENT":t=1;break;case"WAITING_CHOICE_ADDRESS":t=2;break;case"WAITING_SHIP":t=3;break;case"ALREADY_SHIPMENTS":t=4;break;case"WAITING_RECEIPT":t=5;break;case"WAITING_SUN_ALONE":t=6;break;case"CONSUMMATION":t=7}return t}},beforeRouteLeave:function(t,e,s){var a=document.getElementById("iframeBackBtn");a?(a.click(),s(!1)):s()},created:function(){this.orderId=this.$route.query.orderId,this.orderId?this.findOrder():this.$router.go(-1)},methods:{routerBack:function(){this.$router.go(-1)},findOrder:function(){var t=this;this.$api.getOrder(this.orderId,function(e){t.resource=e.resource},function(e){t.$toast({message:e.message}),t.$router.go(-1)})},getPercent:function(t){var e=(100*(1-parseFloat(t.price)/parseFloat(t.marketPrice))).toFixed(2);return isNaN(e)?100:e},pay:function(){var t=this;if(this.orderId){var e={orderId:this.orderId,frpId:this.frpId};this.$api.payment(e,function(e){var s=e.resource.url,a=e.resource.type;window.iframePay.open(s,t.closePay,a)},function(e){t.$toast({message:e.message}),console.log(e.message)})}},closePay:function(){this.findOrder()},findAddresss:function(){var t=this;this.$api.findAddresss(null,function(e){t.addResource=e.resource},function(e){t.$toast({message:e.message})})},chooseAddress:function(){this.addrPopupVisible=!0,this.findAddresss()},select:function(t){this.selectAddrressId=t.id},choice:function(){var t=this;if(!this.selectAddrressId)return void this.$toast({message:"请选择地址"});var e={orderId:this.orderId,addressId:this.selectAddrressId};this.$api.settingAddress(e,function(e){t.findOrder(),t.addrPopupVisible=!1,t.$toast({message:"选择成功"})},function(e){t.addrPopupVisible=!1,t.$toast({message:e.message})})},confirm:function(){var t=this;this.confirming||(this.confirming=!0,this.$api.confirmOrder(this.orderId,function(e){t.findOrder(),t.confirming=!1,t.$toast({message:"收货成功"})},function(e){t.confirming=!1,t.$toast({message:"收货失败，"+e.message})}))},toShowOrder:function(t){"toadd"===t?this.$router.push({name:"addShowOrder",query:{orderId:this.orderId}}):"tosee"===t&&this.$router.push({name:"showOrderDetail",query:{orderId:this.orderId}})}}}},275:function(t,e,s){e=t.exports=s(111)(!1),e.push([t.i,'.goodsflow[data-v-3ba0f0a1]{padding:5px 10px 0;font-size:14px;background-color:#fff}.goodsflow-cell[data-v-3ba0f0a1]{position:relative;border-left:2px solid #e8e8e8;padding-left:20px}.goodsflow-dot[data-v-3ba0f0a1]{width:10px;height:10px;border-radius:30px;background-color:#e8e8e8;position:absolute;top:0;left:-6px}.goodsflow-head[data-v-3ba0f0a1]{position:relative;top:-5px}.goodsflow-info[data-v-3ba0f0a1]{padding:10px 0 20px}.goodsflow-info-content[data-v-3ba0f0a1]{position:relative;width:100%;left:-10px;padding:5px 0 5px 10px;background-color:#ddd;border-radius:5px;font-size:12px;color:#5e5353}.goodsflow-operation[data-v-3ba0f0a1]{position:absolute;right:0;top:-5px}.goodsflow-info-content>div[data-v-3ba0f0a1]{padding-right:10px}.border-red[data-v-3ba0f0a1]{border-color:red}.background-red[data-v-3ba0f0a1]{background-color:red}.address-list[data-v-3ba0f0a1]{background-color:#fff;padding:0 10px 10px;margin-top:20px}.select-active[data-v-3ba0f0a1]:before{background-color:red!important}.select-active[data-v-3ba0f0a1]:after{background-color:red}.address-list[data-v-3ba0f0a1]:before{content:"";height:6px;width:100%;background-image:url('+s(162)+');position:absolute;top:1;left:0}.address-list[data-v-3ba0f0a1]:after{content:"";height:6px;width:100%;background-image:url('+s(162)+");position:absolute;bottom:1;left:0}.address-list h3[data-v-3ba0f0a1]{font-weight:700;font-size:14px;color:#333;line-height:24px;padding-top:20px}.address-list h3 b[data-v-3ba0f0a1]{font-weight:400;background-color:#ef0000;font-size:12px;color:#fff;padding:3px 5px;margin-right:10px;border-radius:3px}.address-list h3 span[data-v-3ba0f0a1]{margin-left:10px;margin-right:10px}.address-list h3 label img[data-v-3ba0f0a1]{width:16px;vertical-align:middle;margin-right:5px;margin-left:10px}.address-list h3 label[data-v-3ba0f0a1]{color:#999;font-weight:400;float:right;margin-top:-3px;font-size:12px;border-left:1px solid #eee}.address-list h3 label[data-v-3ba0f0a1],.address-list h3 label[data-v-3ba0f0a1]:before{background-color:#fff;border-radius:0;transition:.4s}.address-list h3 label[data-v-3ba0f0a1]:active{background-color:#eee;border-radius:50%;transition:.2s}.address-list h5[data-v-3ba0f0a1]{font-size:14px;line-height:24px;color:#333;font-weight:400}.address-list h4[data-v-3ba0f0a1]{padding-bottom:15px;font-size:14px;vertical-align:middle;font-weight:400;margin-top:5px}.address-list h4 img[data-v-3ba0f0a1],.address-list p img[data-v-3ba0f0a1]{width:20px;height:20px;margin-right:10px;vertical-align:middle}.address-list p[data-v-3ba0f0a1]{font-size:14px;vertical-align:middle;font-weight:400;float:right;margin-top:5px;padding-left:10px}.address-fade[data-v-3ba0f0a1]{height:44px;position:fixed;bottom:10px;left:0;width:100%;display:block;text-align:center}.address-add[data-v-3ba0f0a1]{height:44px;display:block;width:60%;line-height:44px;color:#fff;border-radius:30px;box-shadow:1px 1px 10px #f9b1b1;margin:0 auto}.address-add[data-v-3ba0f0a1],.address-add[data-v-3ba0f0a1]:before{background-color:#ef0000;transition:.4s}",""])},309:function(t,e,s){var a=s(275);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s(112)("2deda1cf",a,!0)},357:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"orderDetail"},[s("div",{staticClass:"page-wrap"},[s("div",{staticClass:"page-title"},[s("a",{on:{click:t.routerBack}},[s("i",{staticClass:"icon-back"})]),t._v(" "),s("span",[t._v("订单详情")])]),t._v(" "),s("div",{staticClass:"page-content",staticStyle:{"background-color":"#F8F8F8"}},[s("div",{staticClass:"goodsflow"},[s("div",[t._m(0),t._v(" "),s("span",{staticStyle:{color:"#888"}},[t._v(t._s(t.$const.ORDER_STATE[t.resource.order_state]))])]),t._v(" "),s("br"),t._v(" "),s("div",{staticClass:"goodsflow-cell",class:{"border-red":t.stateIndex>0}},[s("div",{staticClass:"goodsflow-dot ",class:{"background-red":t.stateIndex>=0}}),t._v(" "),s("div",{staticClass:"goodsflow-head"},[t._v("恭喜您，赢得成交")]),t._v(" "),s("div",{staticClass:"goodsflow-info"})]),t._v(" "),s("div",{staticClass:"goodsflow-cell",class:{"border-red":t.stateIndex>1}},[s("div",{staticClass:"goodsflow-dot",class:{"background-red":t.stateIndex>=1}}),t._v(" "),s("div",{staticClass:"goodsflow-head"},[t._v("\n            "+t._s(t.stateIndex>1?"已支付":"待支付")+"\n            "),t.stateIndex>1?s("span",{staticStyle:{"font-size":"12px"}},[t._v("(￥"+t._s(t.resource.price)+")")]):t._e(),t._v(" "),s("div",{staticClass:"goodsflow-operation"},[1===t.stateIndex?s("mt-button",{staticStyle:{width:"80px",height:"25px"},attrs:{type:"danger",size:"small"},on:{click:t.pay}},[t._v("支付")]):t._e()],1)]),t._v(" "),s("div",{staticClass:"goodsflow-info"},[t.stateIndex>1?s("div",{staticClass:"goodsflow-info-content"},[s("div",[t._v("\n                已支付订单￥"+t._s(t.resource.price)+"\n              ")])]):t._e()])]),t._v(" "),s("div",{staticClass:"goodsflow-cell",class:{"border-red":t.stateIndex>2}},[s("div",{staticClass:"goodsflow-dot",class:{"background-red":t.stateIndex>=2}}),t._v(" "),s("div",{staticClass:"goodsflow-head"},[t._v("\n            "+t._s(t.stateIndex>2?"已选择收货地址":"待选择收货地址")+"\n            "),s("div",{staticClass:"goodsflow-operation"},[2===t.stateIndex?s("mt-button",{staticStyle:{width:"80px",height:"25px"},attrs:{type:"danger",size:"small"},on:{click:t.chooseAddress}},[t._v("选择地址")]):t._e()],1)]),t._v(" "),s("div",{staticClass:"goodsflow-info"},[t.stateIndex>2?s("div",{staticClass:"goodsflow-info-content"},[s("div",[t._v("\n                已选择收货信息：\n                联系人："+t._s(t.resource.addressBean.name)+"，\n                联系电话："+t._s(t.resource.addressBean.phone)+"，\n                联系地址："+t._s(t.resource.addressBean.address)+" "+t._s(t.resource.addressBean.detailed_address)+"\n                "+t._s(t.resource.addressBean.penguin?"联系QQ："+t.resource.addressBean.penguin:"")+"\n                "+t._s(t.resource.addressBean.alipay?"支付宝："+t.resource.addressBean.alipay:"")+"\n              ")])]):t._e()])]),t._v(" "),s("div",{staticClass:"goodsflow-cell",class:{"border-red":t.stateIndex>3}},[s("div",{staticClass:"goodsflow-dot",class:{"background-red":t.stateIndex>=3}}),t._v(" "),s("div",{staticClass:"goodsflow-head"},[t._v("\n            "+t._s(t.stateIndex>3?"备货中1-3个工作日发货":"待备货")+"\n            "),s("div",{staticClass:"goodsflow-operation"})]),t._v(" "),s("div",{staticClass:"goodsflow-info"},[t.stateIndex>3?s("div",{staticClass:"goodsflow-info-content"},[s("div",[t._v('\n                已下单，等待商家发货：您参与的"'+t._s(t.resource.item_name)+'" 已经下单了，我们会尽快安排发货。\n              ')])]):t._e()])]),t._v(" "),s("div",{staticClass:"goodsflow-cell",class:{"border-red":t.stateIndex>4}},[s("div",{staticClass:"goodsflow-dot",class:{"background-red":t.stateIndex>=4}}),t._v(" "),s("div",{staticClass:"goodsflow-head"},[t._v("\n            "+t._s(t.stateIndex>4?"已发货":"待发货")+"\n            "),s("div",{staticClass:"goodsflow-operation"})]),t._v(" "),s("div",{staticClass:"goodsflow-info"},[t.stateIndex>4?s("div",{staticClass:"goodsflow-info-content"},[s("div",[t._v('\n                您参与竞拍的 "'+t._s(t.resource.item_name)+'" 已发货，请注意查收。\n              ')])]):t._e()])]),t._v(" "),s("div",{staticClass:"goodsflow-cell",class:{"border-red":t.stateIndex>5}},[s("div",{staticClass:"goodsflow-dot",class:{"background-red":t.stateIndex>=5}}),t._v(" "),s("div",{staticClass:"goodsflow-head"},[t._v("\n            "+t._s(t.stateIndex>5?"已签收":"待签收")+"\n            "),s("div",{staticClass:"goodsflow-operation"},[5===t.stateIndex?s("mt-button",{staticStyle:{width:"80px",height:"25px"},attrs:{type:"danger",size:"small",loading:t.confirming},on:{click:t.confirm}},[t._v("确认收货")]):t._e()],1)]),t._v(" "),s("div",{staticClass:"goodsflow-info"},[t.stateIndex>=5?s("div",{staticClass:"goodsflow-info-content"},[s("div",["IN_KIND"===t.resource.item_type?[t._v('\n                  快递单号为： "'+t._s(t.resource.express_number)+'"\n                ')]:"VIRTUAL"===t.resource.item_type?[t._v('\n                  卡号： "'+t._s(t.resource.card)+'"\n                  卡密 "'+t._s(t.resource.density)+'"\n                ')]:t._e()],2)]):t._e()])]),t._v(" "),s("div",{staticClass:"goodsflow-cell",class:{"border-red":t.stateIndex>6}},[s("div",{staticClass:"goodsflow-dot",class:{"background-red":t.stateIndex>=6}}),t._v(" "),s("div",{staticClass:"goodsflow-head"},[t._v("\n            "+t._s(t.stateIndex>6?"已晒单":"待晒单")+"\n            "),s("div",{staticClass:"goodsflow-operation"},[6===t.stateIndex?s("mt-button",{staticStyle:{width:"80px",height:"25px"},attrs:{type:"danger",size:"small"},on:{click:function(e){t.toShowOrder("toadd")}}},[t._v("晒单")]):t._e(),t._v(" "),t.stateIndex>6?s("mt-button",{staticStyle:{width:"80px",height:"25px"},attrs:{type:"danger",size:"small"},on:{click:function(e){t.toShowOrder("tosee")}}},[t._v("查看晒单")]):t._e()],1)]),t._v(" "),t._m(1)])]),t._v(" "),s("div",{staticStyle:{"margin-top":"15px","background-color":"#ffffff"}},[s("div",{staticStyle:{padding:"10px","border-bottom":"1px solid #888"}},[t._v("商品信息")]),t._v(" "),s("div",{staticStyle:{"font-size":"14px",padding:"0 5px"}},[s("div",{staticStyle:{display:"inline-block",width:"25%"}},[s("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.$api.file.see(t.resource.item_picture),onerror:"this.src='static/img/product/img-computer.png'"}})]),t._v(" "),s("div",{staticStyle:{display:"inline-block",width:"45%","vertical-align":"super"}},[s("div",[t._v("成交人："+t._s(t.resource.name))]),t._v(" "),s("div",[t._v("市场价："+t._s(t.resource.marketPrice))]),t._v(" "),s("div",[t._v("竞拍价："),s("span",[t._v(t._s(t.resource.price))])])]),t._v(" "),s("div",{staticStyle:{position:"relative",top:"-14px",display:"inline-block","text-align":"right",width:"25%"}},[s("b",[t._v(t._s(t.getPercent(t.resource))+"%")]),t._v(" "),s("div",{staticStyle:{"font-size":"12px"}},[t._v("节省")])])])])])]),t._v(" "),s("mt-popup",{staticStyle:{width:"100%"},attrs:{modal:!1,position:"bottom"},model:{value:t.addrPopupVisible,callback:function(e){t.addrPopupVisible=e},expression:"addrPopupVisible"}},[s("div",{staticStyle:{"border-top":"2px solid red"}},[s("div",{staticStyle:{width:"100%","text-align":"center"}},[s("mt-button",{staticStyle:{float:"left"},on:{click:function(e){t.addrPopupVisible=!1}}},[t._v("取消")]),t._v(" "),s("div",{staticStyle:{display:"inline-block",width:"50%","line-height":"40px"}},[t._v("选择地址")]),t._v(" "),s("mt-button",{staticStyle:{float:"right"},on:{click:t.choice}},[t._v("提交")])],1),t._v(" "),s("div",[t._l(t.addResource,function(e,a){return s("div",{key:e.id,staticClass:"address-list",class:{"select-active":t.selectAddrressId===e.id},on:{click:function(s){t.select(e)}}},[s("h3",[t._v(t._s(e.name)+"\n            "),s("span",[t._v(t._s(e.phone))]),t._v(" "),t.selectAddrressId===e.id?s("label",{staticStyle:{"background-color":"red",color:"#fff"}},[t._v("√选中")]):t._e()]),t._v(" "),s("h5",[t._v(t._s(e.detailed_address))]),t._v(" "),s("p",[s("img",{attrs:{src:"static/icon/icon-qq.svg",alt:""}}),t._v(t._s(e.penguin))]),t._v(" "),s("h4",[s("img",{attrs:{src:"static/icon/icon-zhifubao.svg",alt:""}}),t._v(t._s(e.alipay))])])}),t._v(" "),s("div",{staticClass:"address-add",staticStyle:{"text-align":"center"}},[s("router-link",{attrs:{tag:"p",to:{name:"editUserAddress"}}},[s("span",[t._v("+")]),t._v("添加地址")])],1)],2)])]),t._v(" "),s("mt-popup",{staticStyle:{width:"100%"},attrs:{modal:!1,position:"bottom"},model:{value:t.payPopupVisible,callback:function(e){t.payPopupVisible=e},expression:"payPopupVisible"}},[s("div",{staticStyle:{"border-top":"2px solid red"}},[s("div",{staticStyle:{width:"100%","text-align":"center"}},[s("mt-button",{staticStyle:{float:"left"},on:{click:function(e){t.payPopupVisible=!1}}},[t._v("取消")]),t._v(" "),s("div",{staticStyle:{display:"inline-block",width:"50%","line-height":"40px"}},[t._v("选择支付方式")]),t._v(" "),s("mt-button",{staticStyle:{float:"right"},on:{click:t.pay}},[t._v("确定")])],1),t._v(" "),s("div",[s("div",{staticClass:"payList"},[s("mt-radio",{attrs:{align:"right",options:t.options},model:{value:t.frpId,callback:function(e){t.frpId=e},expression:"frpId"}})],1)])])])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticStyle:{"font-size":"15px"}},[s("b",[t._v("订单状态：")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"goodsflow-info"},[s("div")])}]}}});