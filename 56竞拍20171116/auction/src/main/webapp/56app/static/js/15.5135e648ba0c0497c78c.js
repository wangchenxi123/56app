webpackJsonp([15],{140:function(t,e,i){i(324);var o=i(6)(i(245),i(373),null,null);t.exports=o.exports},245:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"smsLogin",data:function(){return{loginForm:{identifier:"",password:"123456",sms:"",validate:!0},fieldState:{identifier:"",sms:""},toastClient:"",codeGetting:!1,codeMessage:"获取验证码"}},created:function(){},activated:function(){},methods:{validateField:function(t,e){var i=!0;switch(t){case"identifier":var o=/^(((13[0-9]{1})|(14[579]{1})|(15[0-35-9]{1})|(17[0135-8]{1})|(18[0-9]{1}))+\d{8})$/;e.identifier.trim()?o.test(e.identifier)?this.fieldState.identifier="success":(this.toast("请输入正确手机号"),this.fieldState.identifier="error",i=!1):(this.toast("请输入手机号码"),this.fieldState.identifier="error",i=!1);break;case"sms":e.sms.trim()||(this.toast("请输入验证码"),i=!1);break;case"validate":e.validate||(this.toast("请勾选同意协议"),i=!1)}return i},sumbit:function(t){var e=this,i=!0;if("loginForm"===t){for(var o in this.loginForm)if(!(i=this.validateField(o,this.loginForm)))return;i&&this.$api.login(this.loginForm,function(t){window.localStorage.setItem("expirationTime",t.resource.expirationTime),window.localStorage.setItem("token",t.resource.token),e.toast("登录成功"),e.$router.replace({name:"userCenter"})},function(t){e.toast("登录失败,"+t.message)})}},toast:function(t){this.toastClient&&this.toastClient.close(),this.toastClient=this.$toast({message:t,position:"middle",duration:2e3})},getCode:function(){var t=this;if(!this.codeGetting&&this.validateField("identifier",this.loginForm)){if("success"!==this.fieldState.identifier)return void this.toast("请输入手机号码");this.codeGetting=!0,this.codeMessage=60;var e=setInterval(function(){0===t.codeMessage?(t.codeMessage="获取验证码",t.codeGetting=!1,window.clearInterval(e)):t.codeMessage--},1e3);this.$api.getCode(this.loginForm.identifier,function(e){t.toast("验证码发送成功")},function(i){t.codeGetting=!1,window.clearInterval(e),t.codeMessage="获取验证码",t.toast("验证码发送失败")})}}}}},290:function(t,e,i){e=t.exports=i(111)(!1),e.push([t.i,"",""])},324:function(t,e,i){var o=i(290);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i(112)("56f1f594",o,!0)},373:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"smsLogin"}},[i("div",{staticClass:"page-wrap"},[i("div",{staticClass:"page-title"},[i("a",{on:{click:function(e){t.$router.replace({name:"login"})}}},[i("i",{staticClass:"icon-back"})]),t._v(" "),i("span",[t._v("验证码登录")])]),t._v(" "),i("div",{staticClass:"page-content"},[i("mt-field",{staticStyle:{"margin-top":"10px","border-top":"1px solid #ccc"},attrs:{type:"tel",label:"账户",placeholder:"请输入手机号码",attr:{maxLength:11},state:t.fieldState.identifier},model:{value:t.loginForm.identifier,callback:function(e){t.$set(t.loginForm,"identifier",e)},expression:"loginForm.identifier"}}),t._v(" "),i("mt-field",{staticStyle:{"border-bottom":"1px solid #ccc"},attrs:{label:"验证码",placeholder:"请输入验证码",attr:{maxLength:8}},model:{value:t.loginForm.sms,callback:function(e){t.$set(t.loginForm,"sms",e)},expression:"loginForm.sms"}},[i("a",{staticStyle:{color:"#aaa"},attrs:{href:"javascript: void(0);"},on:{click:function(e){t.getCode()}}},[t._v(t._s(t.codeMessage))])]),t._v(" "),i("div",{staticStyle:{margin:"10px 0","text-align":"center","font-size":"12px"}},[i("div",{},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.loginForm.validate,expression:"loginForm.validate"}],staticStyle:{margin:"1px 0",width:"15px",height:"15px"},attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.loginForm.validate)?t._i(t.loginForm.validate,null)>-1:t.loginForm.validate},on:{change:function(e){var i=t.loginForm.validate,o=e.target,a=!!o.checked;if(Array.isArray(i)){var s=t._i(i,null);o.checked?s<0&&(t.loginForm.validate=i.concat([null])):s>-1&&(t.loginForm.validate=i.slice(0,s).concat(i.slice(s+1)))}else t.$set(t.loginForm,"validate",a)}}}),i("span",{staticStyle:{"vertical-align":"top",color:"#888"}},[t._v("注册或使用网站账号登录即视为您已同意")])]),t._v(" "),i("div",{staticStyle:{"font-size":"14px"}},[i("router-link",{attrs:{tag:"span",to:{path:"/agreement"}}},[t._v("《用户使用协议》")])],1)]),t._v(" "),i("div",{staticStyle:{padding:"0px 10px"}},[i("mt-button",{staticStyle:{width:"100%","margin-top":"20px","background-color":"red",color:"#ffffff"},on:{click:function(e){t.sumbit("loginForm")}}},[t._v("登录")]),t._v(" "),i("mt-button",{staticStyle:{width:"100%","margin-top":"20px","border-bottom-color":"red",color:"red"},attrs:{plain:""},on:{click:function(e){t.$router.push({name:"register"})}}},[t._v("手机号快速注册")])],1)],1)])])},staticRenderFns:[]}}});