webpackJsonp([23],{192:function(e,t,i){function s(e){i(330)}var a=i(43)(i(278),i(360),s,null,null);e.exports=a.exports},278:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"ordinary",data:function(){var e=this;return{query:{name:"",item_type:"",disable:"",running_program:"",pageNo:1,pageSize:10},resource:{content:[],totalElements:0},committing:!1,visiable:{dialog:!1,addr:!1,pwd:!1,notice:!1,gift:!1},addrs:[],pwd:{newPassword:"",pwdCheck:""},updating:!1,pwdRules:{newPassword:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:function(t,i,s){""===i?s(new Error("请输入密码")):(""!==e.pwd.pwdCheck&&e.$refs.pwdForm.validateField("pwdCheck"),s())},trigger:"blur"}],pwdCheck:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:function(t,i,s){i!==e.pwd.newPassword?s(new Error("两次输入密码不一致!")):s()},trigger:"blur"}]},notice:{userId:"",title:"",context:"",state:"UNSENT"},isAddNotice:!1,addingNotice:!1,queryNotice:{userId:"",pageNo:1,pageSize:10},noticeResource:{content:[],totalElements:0},noticeRules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],context:[{required:!0,message:"请输入内容",trigger:"blur"}],state:[{required:!0,message:"请选择状态",trigger:"change"}]},addingGift:!1,gift:{number:"",reason:""},giftRules:{number:[{required:!0,type:"number",message:"请输入数量",trigger:"blur"}],reason:[{required:!0,message:"请输入原因",trigger:"blur"}]}}},watch:{"visiable.dialog":function(e,t){e||(this.isAddNotice=!1)}},created:function(){this.findUsers()},methods:{findUsers:function(){var e=this;this.$api.findUsers(this.query,function(t){e.resource=t.resource},function(t){e.$notify({type:"error",message:t.message})})},search:function(){this.findUsers()},pageChange:function(e){this.query.pageNo=e,this.findUsers()},showDialog:function(e){for(var t in this.visiable)this.$set(this.visiable,t,!1);this.visiable.hasOwnProperty(e)&&this.$set(this.visiable,e,!0),this.$set(this.visiable,"dialog",!0)},showAddr:function(e,t){var i=this;this.$api.findUsersAddress(t.id,function(e){i.addrs=e.resource},function(e){i.$notify({type:"error",message:e.message})}),this.showDialog("addr")},showPwd:function(e,t){var i=this;this.showDialog("pwd"),this.$nextTick(function(){i.$refs.pwdForm.resetFields(),i.pwd.userId=t.id})},findUserNotices:function(){var e=this;this.$api.findUserNotices(this.queryNotice,function(t){e.noticeResource=t.resource},function(t){e.$notify({type:"error",message:t.message})})},showNotice:function(e,t){this.queryNotice.userId=t.id,this.findUserNotices(),this.showDialog("notice")},showGift:function(e,t,i){var s=this;this.showDialog("gift"),this.$nextTick(function(){s.$refs.giftForm.resetFields(),s.gift.userId=t.id,s.$set(s.gift,"flg",i)})},addGift:function(e){var t=this;this.$refs[e].validate(function(e){if(e&&!t.addingGift){t.addingGift=!0;var i="";"gift"===t.gift.flg?i="giftCoin":"coin"===t.gift.flg?i="giftRealCoin":"integral"===t.gift.flg&&(i="giftIntegral"),t.$api[i](t.gift,function(e){t.$message({type:"success",message:"操作成功"}),t.$set(t.visiable,"dialog",!1),t.addingGift=!1,t.findUsers()},function(e){t.addingGift=!1,t.$message({type:"error",message:e.message})})}})},updatePwd:function(e){var t=this;this.$refs[e].validate(function(e){e&&!t.updating&&(t.updating=!0,t.$api.updateUsersPwd(t.pwd,function(e){t.$message({type:"success",message:"修改成功"}),t.$set(t.visiable,"dialog",!1),t.updating=!1},function(e){t.updating=!1,t.$message({type:"error",message:e.message})}))})},noticePageChange:function(e){this.queryNotice.pageNo=e,this.findUserNotices()},deleteNotice:function(e,t){var i=this;this.$api.deleteNotice(t.id,function(e){i.$message({type:"success",message:"删除成功"})},function(e){i.$message({type:"error",message:e.message})})},showAddNotice:function(){var e=this;this.isAddNotice=!0,this.$nextTick(function(){e.$refs.noticeForm.resetFields(),e.notice.title="",e.notice.context="",e.notice.state="UNSENT",e.notice.userId=e.queryNotice.userId})},addNotice:function(e){var t=this;this.$refs[e].validate(function(e){e&&!t.addingNotice&&t.$api.addPersonalNotice(t.notice,function(e){t.$message({type:"success",message:"添加成功"}),t.$set(t.visiable,"dialog",!1),t.addingNotice=!1},function(e){t.addingNotice=!1,t.$message({type:"error",message:e.message})})})},updateEnable:function(e,t){var i=this;this.$api.updateUserEnable(t.id,function(e){t.disable?i.$message({type:"success",message:"禁用成功"}):i.$message({type:"success",message:"启用成功"})},function(e){t.disable?i.$message({type:"error",message:"禁用失败,"+e.message}):i.$message({type:"error",message:"启用失败,"+e.message}),i.$set(t,"disable",!t.disable)})}}}},301:function(e,t,i){t=e.exports=i(181)(!1),t.push([e.i,"",""])},330:function(e,t,i){var s=i(301);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);i(182)("424d1670",s,!0)},360:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"ordinary"}},[i("h2",[e._v("普通会员列表")]),e._v(" "),i("div",[i("el-form",{attrs:{model:e.query,inline:""}},[i("el-form-item",[i("el-input",{attrs:{size:"small",placeholder:"用户名称"},model:{value:e.query.name,callback:function(t){e.query.name=t},expression:"query.name"}})],1),e._v(" "),i("el-form-item",[i("el-input",{attrs:{size:"small",placeholder:"手机号码"},model:{value:e.query.phone,callback:function(t){e.query.phone=t},expression:"query.phone"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{icon:"search",type:"primary",size:"small","native-type":"submit"},on:{click:function(t){t.preventDefault(),e.search(t)}}},[e._v("搜索")])],1)],1)],1),e._v(" "),i("el-table",{attrs:{data:e.resource.content,border:""}},[i("el-table-column",{attrs:{label:"序号","min-width":"65"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{domProps:{textContent:e._s(e.resource.number*e.resource.size+t.$index+1)}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"会员名称",prop:"username"}}),e._v(" "),i("el-table-column",{attrs:{label:"手机号码",prop:"iphone"}}),e._v(" "),i("el-table-column",{attrs:{label:"拍币",prop:"coin"}}),e._v(" "),i("el-table-column",{attrs:{label:"赠币",prop:"gift"}}),e._v(" "),i("el-table-column",{attrs:{label:"积分",prop:"integral"}}),e._v(" "),i("el-table-column",{attrs:{label:"中奖次数",prop:"number"}}),e._v(" "),i("el-table-column",{attrs:{label:"最后登录时间",prop:"final_login"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.$filter.date(t.row.final_login))+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"注册时间",prop:"join_date"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.$filter.date(t.row.join_date))+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"定位地址",prop:"address"}}),e._v(" "),i("el-table-column",{attrs:{label:"禁用",prop:"disable","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-switch",{attrs:{"on-text":"","off-text":""},on:{change:function(i){e.updateEnable(i,t.row)}},model:{value:t.row.disable,callback:function(e){t.row.disable=e},expression:"scope.row.disable"}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{"margin-left":"0"},attrs:{plain:!0,type:"primary",size:"mini"},on:{click:function(i){e.showAddr(t.$index,t.row)}}},[e._v("收货地址")]),e._v(" "),i("el-button",{staticStyle:{"margin-left":"0"},attrs:{plain:!0,type:"primary",size:"mini"},on:{click:function(i){e.showPwd(t.$index,t.row)}}},[e._v("修改密码")]),e._v(" "),i("el-button",{staticStyle:{"margin-left":"0"},attrs:{plain:!0,type:"primary",size:"mini"},on:{click:function(i){e.showNotice(t.$index,t.row)}}},[e._v("个人通知")]),e._v(" "),i("el-button",{staticStyle:{"margin-left":"0"},attrs:{plain:!0,type:"primary",size:"mini"},on:{click:function(i){e.showGift(t.$index,t.row,"gift")}}},[e._v("修改赠币")]),e._v(" "),i("el-button",{staticStyle:{"margin-left":"0"},attrs:{plain:!0,type:"primary",size:"mini"},on:{click:function(i){e.showGift(t.$index,t.row,"coin")}}},[e._v("修改拍币")]),e._v(" "),i("el-button",{staticStyle:{"margin-left":"0"},attrs:{plain:!0,type:"primary",size:"mini"},on:{click:function(i){e.showGift(t.$index,t.row,"integral")}}},[e._v("修改积分")])]}}])})],1),e._v(" "),i("el-pagination",{attrs:{"current-page":e.query.pageNo,"page-size":e.query.pageSize,layout:"total, prev, pager, next, jumper",total:e.resource.totalElements},on:{"current-change":e.pageChange}}),e._v(" "),i("el-dialog",{attrs:{size:e.visiable.addr||e.visiable.notice?"small":"tiny","close-on-click-modal":!1},model:{value:e.visiable.dialog,callback:function(t){e.visiable.dialog=t},expression:"visiable.dialog"}},[e.visiable.addr?[i("span",{attrs:{slot:"title"},slot:"title"},[e._v("地址")]),e._v(" "),i("el-table",{attrs:{data:e.addrs,border:""}},[i("el-table-column",{attrs:{label:"收货人姓名",prop:"name"}}),e._v(" "),i("el-table-column",{attrs:{label:"收货人联系方式",prop:"phone"}}),e._v(" "),i("el-table-column",{attrs:{label:"收货人地区",prop:"address"}}),e._v(" "),i("el-table-column",{attrs:{label:"详细地址",prop:"detailed_address"}}),e._v(" "),i("el-table-column",{attrs:{label:"QQ号",prop:"penguin"}}),e._v(" "),i("el-table-column",{attrs:{label:"支付宝",prop:"alipay"}})],1)]:e.visiable.pwd?[i("span",{attrs:{slot:"title"},slot:"title"},[e._v("修改密码")]),e._v(" "),i("el-form",{ref:"pwdForm",attrs:{model:e.pwd,rules:e.pwdRules,"label-width":"90px"}},[i("el-form-item",{attrs:{prop:"newPassword",label:"用户密码"}},[i("el-input",{attrs:{size:"small",type:"password"},model:{value:e.pwd.newPassword,callback:function(t){e.pwd.newPassword=t},expression:"pwd.newPassword"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"pwdCheck",label:"重输密码"}},[i("el-input",{attrs:{size:"small",type:"password"},model:{value:e.pwd.pwdCheck,callback:function(t){e.pwd.pwdCheck=t},expression:"pwd.pwdCheck"}})],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{size:"small",loading:e.updating},on:{click:function(t){e.updatePwd("pwdForm")}}},[e._v("确定")]),e._v(" "),i("el-button",{attrs:{size:"small"},on:{click:function(t){e.visiable.dialog=!1}}},[e._v("取消")])],1)]:e.visiable.notice?[e.isAddNotice?[i("span",{attrs:{slot:"title"},slot:"title"},[e._v("添加通知")]),e._v(" "),i("el-form",{ref:"noticeForm",attrs:{model:e.notice,rules:e.noticeRules,"label-width":"70px"}},[i("el-form-item",{attrs:{prop:"title",label:"标题"}},[i("el-input",{attrs:{size:"small"},model:{value:e.notice.title,callback:function(t){e.notice.title=t},expression:"notice.title"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"context",label:"内容"}},[i("el-input",{attrs:{type:"textarea",size:"small"},model:{value:e.notice.context,callback:function(t){e.notice.context=t},expression:"notice.context"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"state",label:"状态"}},[i("el-select",{attrs:{size:"small",clearable:"",placeholder:"状态"},model:{value:e.notice.state,callback:function(t){e.notice.state=t},expression:"notice.state"}},e._l(e.$const.NOTICE_STATE,function(e,t){return i("el-option",{key:t,attrs:{label:e,value:t}})}))],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{size:"small",loading:e.addingNotice},on:{click:function(t){e.addNotice("noticeForm")}}},[e._v("确定")]),e._v(" "),i("el-button",{attrs:{size:"small"},on:{click:function(t){e.isAddNotice=!1}}},[e._v("取消")])],1)]:[i("span",{attrs:{slot:"title"},slot:"title"},[e._v("个人通知")]),e._v(" "),i("el-button",{attrs:{size:"small"},on:{click:e.showAddNotice}},[e._v("添加通知")]),e._v(" "),i("el-table",{attrs:{data:e.noticeResource.content,border:""}},[i("el-table-column",{attrs:{label:"标题",prop:"title"}}),e._v(" "),i("el-table-column",{attrs:{label:"内容",prop:"context"}}),e._v(" "),i("el-table-column",{attrs:{label:"状态",prop:"state"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.$const.NOTICE_STATE[t.row.state]))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"时间",prop:"time"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.$filter.date(t.row.time)))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"small",loading:e.updating},on:{click:function(i){e.deleteNotice(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("el-pagination",{attrs:{"current-page":e.queryNotice.pageNo,"page-size":e.queryNotice.pageSize,layout:"total, prev, pager, next, jumper",total:e.noticeResource.totalElements},on:{"current-change":e.noticePageChange}})]]:e.visiable.gift?["gift"===e.gift.flg?i("span",{attrs:{slot:"title"},slot:"title"},[e._v("修改赠币")]):"coin"===e.gift.flg?i("span",{attrs:{slot:"title"},slot:"title"},[e._v("修改拍币")]):"integral"===e.gift.flg?i("span",{attrs:{slot:"title"},slot:"title"},[e._v("修改积分")]):e._e(),e._v(" "),i("el-form",{ref:"giftForm",attrs:{model:e.gift,rules:e.giftRules,"label-width":"70px"}},[i("el-form-item",{attrs:{prop:"number",label:"数目"}},[i("el-input-number",{attrs:{step:1,controls:!1},model:{value:e.gift.number,callback:function(t){e.gift.number=t},expression:"gift.number"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"reason",label:"原因"}},[i("el-input",{attrs:{type:"textarea",size:"small"},model:{value:e.gift.reason,callback:function(t){e.gift.reason=t},expression:"gift.reason"}})],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{size:"small",loading:e.addingGift},on:{click:function(t){e.addGift("giftForm")}}},[e._v("确定")]),e._v(" "),i("el-button",{attrs:{size:"small"},on:{click:function(t){e.visiable.dialog=!1}}},[e._v("取消")])],1)]:e._e()],2)],1)},staticRenderFns:[]}}});