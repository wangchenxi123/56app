webpackJsonp([28],{116:function(t,e,i){i(326);var o=i(6)(i(221),i(375),"data-v-b6db1b7a",null);t.exports=o.exports},221:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=0,s=["goodsDetail","goodsHistoryDetail"];e.default={name:"allGoods",data:function(){return{screenWidth:document.body.clientWidth-90,screenHeight:document.body.clientHeight-100,selectSortId:0,querySort:{pageNo:1,pageSize:20},sortResource:{content:[],last:!1},resource:{items:[]},items:{}}},watch:{"$global.WSMessage":function(t,e){var i=this,o=t.itemId;"BIDDER"===t.message_type?this.items&&this.items.hasOwnProperty(o)&&!this.items[o].settlement&&!this.items[o].interrupted&&(this.$set(this.items[o],"price",t.price),this.$set(this.items[o],"active",!0),window.setTimeout(function(){i.items.hasOwnProperty(o)&&i.$set(i.items[o],"active",!1)},1e3)):"HEADLINES"===t.message_type&&t.userId?this.items.hasOwnProperty(o)&&this.$set(this.items[o],"settlement",!0):"SYSTEM_SLEEP"===t.message_type?this.$set(this.items[o],"interrupted",!0):this.items.hasOwnProperty(o)&&!this.items[o].interrupted&&(this.$set(this.items[o],"active",!0),window.setTimeout(function(){i.items.hasOwnProperty(o)&&i.$set(i.items[o],"active",!1)},1e3))},screenWidth:function(t){if(!this.timer){this.screenWidth=t,this.timer=!0;var e=this;setTimeout(function(){e.timer=!1},1e3)}}},created:function(){},beforeRouteEnter:function(t,e,i){-1===s.indexOf(e.name)?(document.body.scrollTop=0,o=0):document.body.scrollTop=o,i(function(t){-1===s.indexOf(e.name)&&t.findSorts()})},beforeRouteLeave:function(t,e,i){o=document.body.scrollTop,i()},activated:function(){},deactivated:function(){},mounted:function(){var t=this;window.onresize=function(){return function(){window.screenWidth=document.body.clientWidth,t.screenWidth=window.screenWidth-90}()}},methods:{goto:function(t){this.items[t.itemBean.id].settlement?this.$router.push({name:"goodsHistoryDetail",query:{record_id:t.id}}):this.$router.push({name:"goodsDetail",query:{id:t.itemBean.id}})},findSorts:function(){var t=this;this.$api.findSorts(this.querySort,function(e){1===t.querySort.pageNo&&e.resource.content[0]&&(t.selectSortId=e.resource.content[0].id),t.sortResource=e.resource,0!==t.selectSortId&&t.findItems()},function(e){t.$toast({message:e.message,duration:3e3})})},findItems:function(){var t=this;this.$api.findItemsBySortId(this.selectSortId,function(e){t.items={},e.resource.items&&e.resource.items.forEach(function(e){t.items.hasOwnProperty(e.itemBean.id)||t.$set(t.items,e.itemBean.id,e)}),t.resource=e.resource,t.$refs.loadTop.onTopLoaded()},function(e){t.$refs.loadTop.onTopLoaded(),t.$toast({message:e.message,duration:3e3})})},selSort:function(t){this.selectSortId!==t.id&&(this.selectSortId=t.id,this.findItems())},loadTop:function(){if(0===this.selectSortId)return this.findSorts(),void this.$refs.loadTop.onTopLoaded();this.loadType="REFRESH",this.findItems()}}}},292:function(t,e,i){e=t.exports=i(111)(!1),e.push([t.i,'.mint-button--small[data-v-b6db1b7a]{font-size:12px;padding:0 5px!important;height:28px;margin:0}.mint-button--danger[data-v-b6db1b7a]{background-color:#ef0000;margin:0}.page-title[data-v-b6db1b7a]{height:48px;line-height:48px;text-align:center;color:#fff;background-color:#ef0000;font-size:18px;font-weight:700;position:fixed;width:100%;z-index:4}.allGoods .page-content[data-v-b6db1b7a]{padding-top:48px;padding-bottom:40px;height:100%}.allGoods[data-v-b6db1b7a]{height:100%;background-color:#fbfbfb}.sort-nav[data-v-b6db1b7a]{float:left;display:inline-block;width:90px}.sort-nav[data-v-b6db1b7a],ul.sort-nav-list[data-v-b6db1b7a]{margin:0;padding:0;overflow-y:scroll;height:100%}ul.sort-nav-list li[data-v-b6db1b7a]{text-align:center;font-size:14px;line-height:44px;border-bottom:1px solid #f2f2f2;color:#999;position:relative;border-right:1px solid #f2f2f2}ul.sort-nav-list li.active[data-v-b6db1b7a]{background-color:#fff;color:#000;border-right:1px solid #fff;transition:.4s}ul.sort-nav-list li.active[data-v-b6db1b7a]:before{content:" ";display:inline-block;width:3px;height:20px;left:0;top:12px;position:absolute;background-color:red}ul.sort-nav-list li.active[data-v-b6db1b7a]:active{background-color:#eee;border-top-right-radius:50%;border-bottom-right-radius:50%;transition:.2s}.sort-content[data-v-b6db1b7a]{display:inline-block;background-color:#fff;overflow-y:scroll}ul.sort-content-list[data-v-b6db1b7a]{margin:0;padding:0}ul.sort-content-list li[data-v-b6db1b7a]{border-bottom:1px solid #f2f2f2;display:block;width:100%;padding:10px 0;transition:.4s;background-color:#fff}ul.sort-content-list li[data-v-b6db1b7a]:bofore{transition:.4s;background-color:#fff}ul.sort-content-list li[data-v-b6db1b7a]:active{background-color:#eee;transition:.2s;border-radius:50%}ul.sort-content-list li .sort-content-img[data-v-b6db1b7a]{position:relative;z-index:1;width:30%;max-width:90px;float:left}ul.sort-content-list li img[data-v-b6db1b7a]{width:100%}ul.sort-content-list li .sort-content-list-info[data-v-b6db1b7a]{display:inline-block;width:70%}ul.sort-content-list li .sort-content-list-info h5[data-v-b6db1b7a]{font-size:14px;white-space:nowrap;word-wrap:normal;text-overflow:ellipsis;overflow:hidden;margin:3px 10px 0 0;font-weight:600;padding-left:10px;color:#333}ul.sort-content-list li .sort-content-list-info p[data-v-b6db1b7a]{font-size:14px;white-space:nowrap;word-wrap:normal;text-overflow:ellipsis;overflow:hidden;margin:0 0 6px;font-weight:600;padding-left:10px;color:#333}ul.sort-content-list li .sort-content-list-info span[data-v-b6db1b7a]{color:#ef0000;font-size:14px;margin-left:10px}ul.sort-content-list li .sort-content-list-info button[data-v-b6db1b7a]{display:inline-block;float:right;margin-right:10px}span.active[data-v-b6db1b7a]{border-radius:30px;animation:priceAcitve 1s infinite ease;-moz-animation:priceAcitve 1s infinite ease;-webkit-animation:priceAcitve 1s infinite ease;-o-animation:priceAcitve 1s infinite ease}@keyframes priceAcitve{0%{background-color:#f9b1b1}to{background0color:#fff}}@-webkit-keyframes priceAcitve{0%{background-color:#f9b1b1}to{background0color:#fff}}',""])},326:function(t,e,i){var o=i(292);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i(112)("eaf6fcf4",o,!0)},375:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"allGoods"},[i("div",{staticClass:"page-wrap"},[i("div",{staticClass:"page-title"},[t._v("全部商品")]),t._v(" "),i("div",{staticClass:"page-content"},[i("div",{staticClass:"sort-nav"},[i("ul",{staticClass:"sort-nav-list",style:{height:t.screenHeight+"px"}},t._l(t.sortResource.content,function(e,o){return i("li",{key:e.id,class:{active:e.id===t.selectSortId},on:{click:function(i){t.selSort(e)}}},[t._v(t._s(e.name))])}))]),t._v(" "),i("mt-loadmore",{ref:"loadTop",attrs:{"top-method":t.loadTop}},[i("div",{staticClass:"sort-content",style:{width:t.screenWidth+"px",height:t.screenHeight+"px"}},[i("ul",{staticClass:"sort-content-list"},t._l(t.items,function(e,o){return i("li",{key:o,on:{click:function(i){t.goto(e)}}},[i("div",{staticClass:"sort-content-img",staticStyle:{display:"inline-block",float:"none",width:"25%"}},[i("img",{attrs:{src:t.$api.file.see(e.itemBean.small_picture),alt:"产品图",onerror:"this.src='static/img/product/img-car.png'"}}),t._v(" "),e.settlement?i("i",{staticClass:"icon-finish"}):t._e()]),t._v(" "),i("div",{staticClass:"sort-content-list-info"},[i("h5",[t._v(t._s(e.itemBean.name))]),t._v(" "),i("p",[t._v(t._s(e.tag))]),t._v(" "),i("span",{class:{active:e.active}},[t._v("￥"+t._s(e.price))]),t._v(" "),e.interrupted?i("mt-button",{attrs:{type:"default",size:"small"}},[t._v("休眠中...")]):i("mt-button",{attrs:{type:e.settlement?"default":"danger",size:"small"}},[t._v(t._s(e.settlement?"去下一期":"参与竞拍"))])],1)])}))])])],1)])])},staticRenderFns:[]}}});