webpackJsonp([18],{201:function(e,t,i){function a(e){i(340)}var l=i(43)(i(287),i(370),a,null,null);e.exports=l.exports},287:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"robotShowPrize",data:function(){return{committing:!1,query:{username:"",itemName:"",startTime:"",endTime:"",pageNo:1,pageSize:10},startTime:"",endTime:"",resource:{content:[],totalElements:0},dialogVisiable:!1,item:{sealedId:"",title:"",context:"",grade:5,pictureList:[]},uploading:!1,showRules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],context:[{required:!0,message:"请输入内容",trigger:"blur"}]}}},created:function(){this.findSealedBeforeShow()},methods:{findSealedBeforeShow:function(){var e=this;this.$api.findSealedBeforeShow(this.query,function(t){e.resource=t.resource},function(t){e.$notify({type:"error",message:t.message})})},search:function(){this.findSealedBeforeShow()},pageChange:function(e){this.query.pageNo=e,this.findSealedBeforeShow()},uploadHandle:function(e){var t=this,i=e.file;if(!/image\/\w+/.test(i.type))return void this.$message({type:"info",message:"只能上传图片"});if(i.size>=2e6)return void this.$message({type:"warning",message:"图片不能大于5M"});var a=new FormData;a.append("file",i),a.append("type","IMAGE"),this.uploading=!0,this.$api.uploadImage(a,function(e){t.item.pictureList.push(e.file.id),t.uploading=!1},function(e){t.$message({type:"error",message:e.message}),t.uploading=!1})},dateHandel:function(e,t){this.query[t]=e&&"startTime"===t?e+" 00:00:00":e&&"endTime"===t?e+" 23:59:59":""},show:function(e,t){var i=this;this.dialogVisiable=!0,this.$nextTick(function(){i.$refs.showForm.resetFields(),i.item.sealedId=t.id})},addSealedBeforeShow:function(e){var t=this;this.$refs[e].validate(function(e){e&&!t.committing&&t.$api.addSealedBeforeShow(t.item,function(e){t.$message({type:"success",message:"晒单成功"}),t.committing=!1,t.dialogVisiable=!1},function(e){t.$message({type:"success",message:e.message}),t.committing=!1})})}}}},311:function(e,t,i){t=e.exports=i(181)(!1),t.push([e.i,"",""])},340:function(e,t,i){var a=i(311);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(182)("28f8938f",a,!0)},370:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"robotShowPrize"}},[i("h2",[e._v("机器人未晒单中奖记录")]),e._v(" "),i("div",[i("el-form",{attrs:{model:e.query,inline:""}},[i("el-form-item",[i("el-input",{attrs:{size:"small",placeholder:"中奖人"},model:{value:e.query.username,callback:function(t){e.query.username=t},expression:"query.username"}})],1),e._v(" "),i("el-form-item",[i("el-input",{attrs:{size:"small",placeholder:"商品名称"},model:{value:e.query.itemName,callback:function(t){e.query.itemName=t},expression:"query.itemName"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{icon:"search",type:"primary",size:"small","native-type":"submit"},on:{click:function(t){t.preventDefault(),e.search(t)}}},[e._v("搜索")])],1)],1)],1),e._v(" "),i("el-table",{attrs:{data:e.resource.content,border:""}},[i("el-table-column",{attrs:{label:"商品名称",prop:"itemName"}}),e._v(" "),i("el-table-column",{attrs:{label:"中奖时间",prop:"time"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.$filter.date(t.row.time)))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"中奖人",prop:"name"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{"margin-left":"0"},attrs:{plain:!0,type:"primary",size:"mini"},on:{click:function(i){e.show(t.$index,t.row)}}},[e._v("晒单")])]}}])})],1),e._v(" "),i("el-pagination",{attrs:{"current-page":e.query.pageNo,"page-size":e.query.pageSize,layout:"total, prev, pager, next, jumper",total:e.resource.totalElements},on:{"current-change":e.pageChange}}),e._v(" "),i("el-dialog",{attrs:{size:"tiny","close-on-click-modal":!1},model:{value:e.dialogVisiable,callback:function(t){e.dialogVisiable=t},expression:"dialogVisiable"}},[i("span",{attrs:{slot:"title"},slot:"title"},[e._v("添加晒单")]),e._v(" "),i("el-form",{ref:"showForm",attrs:{model:e.item,rules:e.showRules,"label-width":"70px"}},[i("el-form-item",{attrs:{prop:"title",label:"标题"}},[i("el-input",{attrs:{size:"small"},model:{value:e.item.title,callback:function(t){e.item.title=t},expression:"item.title"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"context",label:"内容"}},[i("el-input",{attrs:{type:"textarea",size:"small"},model:{value:e.item.context,callback:function(t){e.item.context=t},expression:"item.context"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"grade",label:"评分"}},[i("el-rate",{model:{value:e.item.grade,callback:function(t){e.item.grade=t},expression:"item.grade"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"pictureList",label:"图片"}},[e._l(e.item.pictureList,function(t,a){return i("div",{key:t,staticClass:"picture-uploader-list-item"},[i("img",{staticClass:"picture-uploader-list-item-img",attrs:{src:e.$api.file.see(t)}})])}),e._v(" "),i("el-upload",{staticClass:"picture-uploader",staticStyle:{display:"inline-block"},attrs:{action:"",accept:"image/*",multiple:"","show-file-list":!1,data:{type:"IMAGE"},disabled:e.uploading,"http-request":e.uploadHandle}},[i("i",{staticClass:"picture-uploader-icon",class:e.uploading?"el-icon-loading":"el-icon-plus"}),e._v(" "),i("i",{staticClass:"el-icon-plus"})])],2)],1),e._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{size:"small",loading:e.committing},on:{click:function(t){e.addSealedBeforeShow("showForm")}}},[e._v("确定")]),e._v(" "),i("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisiable=!1}}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]}}});