webpackJsonp([30],{114:function(t,e,i){i(319);var a=i(6)(i(219),i(368),"data-v-7d2ca63e",null);t.exports=a.exports},219:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"addShowOrder",data:function(){return{addItem:{title:"",itemId:"",context:"",pictureList:[],grade:5,orderId:""},uploading:!1,submitting:!1,resource:{},photo:[]}},components:{},created:function(){var t=this,e=this.$route.query.orderId;e?this.$api.getOrder(e,function(e){t.resource=e.resource,t.addItem.orderId=e.resource.id},function(e){t.$toast({message:e.message})}):this.$router.go(-1)},methods:{routerBack:function(){this.$router.go(-1)},upload:function(t){for(var e=this,i=[],a=0;a<t.target.files.length;a++)i.push(t.target.files.item(a));t.target.value=null,i.map(function(t){if(t){if(!/image\/\w+/.test(t.type))return void e.$toast({message:"只能上传图片"});if(t.size>=5e6)return void e.$toast({message:"图片不能大于5M"});var i=new FormData;i.append("file",t),i.append("type","IMAGE"),e.uploading=!0,e.$api.uploadImage(i,function(t){e.addItem.pictureList.push(t.file.id),e.uploading=!1},function(t){e.$toast({message:t.message}),e.uploading=!1})}})},submit:function(){var t=this;return this.addItem.title.trim()?this.addItem.context.trim()?(this.submitting=!0,void this.$api.addShowOrder(this.addItem,function(e){t.toast("提交成功"),t.submitting=!1,t.$emit("addShowOrder",!0),t.$router.go(-1)},function(e){t.submitting=!1,t.toast(e.message)})):void this.toast("请输入内容"):void this.toast("请输入标题")},toast:function(t){this.toastClient&&this.toastClient.close(),this.toastClient=this.$toast({message:t,position:"middle",duration:2e3})}}}},285:function(t,e,i){e=t.exports=i(111)(!1),e.push([t.i,".media-list[data-v-7d2ca63e]{width:100%;padding:0;margin-bottom:10px;border-top:1px solid #f2f2f2}a.media-item[data-v-7d2ca63e]{display:inline-block;margin:0 0 -4px;padding:0;width:100%;position:relative;border-bottom:1px solid #f2f2f2;background-color:#fff}a.media-item .media-img[data-v-7d2ca63e]{width:15%;float:left}a.media-item .media-img img[data-v-7d2ca63e]{margin:10px 0 5px 10px;min-width:24px;max-width:56px}.media-title[data-v-7d2ca63e]{width:85%;float:left}.media-title h5[data-v-7d2ca63e]{padding:14px 10px 5px;font-size:14px;font-weight:500;color:#333}.media-title p[data-v-7d2ca63e]{padding:0 30px 10px 10px;white-space:nowrap;word-wrap:normal;text-overflow:ellipsis;overflow:hidden;font-size:12px;color:#999}.showOrderDetail a.media-item:nth-child(2) img[data-v-7d2ca63e]{background-color:#fff;padding:0 0 0 10px;width:24px;height:24px}.showOrderDetail-info[data-v-7d2ca63e]{background-color:#fff;padding:10px 20px;margin-top:-10px}.showOrderDetail-info h3[data-v-7d2ca63e]{font-size:16px;color:#333;margin:10px auto}.showOrderDetail-info p[data-v-7d2ca63e]{text-indent:2em;text-align:left;font-weight:400;font-size:14px;color:#333;margin:10px auto;line-height:20px}ul.photoList[data-v-7d2ca63e]{margin:0;padding:0}ul.photoList li[data-v-7d2ca63e]{margin-bottom:20px}ul.photoList li img[data-v-7d2ca63e]{width:100%;box-shadow:1px 3px 15px #eee}input.fileInput[data-v-7d2ca63e]{background-color:transparent;opacity:0;position:absolute;width:100%;height:48px;left:0;z-index:3}",""])},319:function(t,e,i){var a=i(285);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(112)("e5de9f7a",a,!0)},368:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"showOrderDetail"},[i("div",{staticClass:"page-wrap"},[i("div",{staticClass:"page-title"},[i("a",{on:{click:t.routerBack}},[i("i",{staticClass:"icon-back"})]),t._v(" "),i("span",[t._v("添加晒单")])]),t._v(" "),i("div",{staticClass:"page-content"},[i("div",{staticClass:"media-list"},[i("a",{staticClass:"media-item"},[t._m(0),t._v(" "),i("div",{staticClass:"media-title"},[i("h5",[t._v(t._s(t.resource.item_name))]),t._v(" "),i("div",{staticClass:"circle-red"})])])]),t._v(" "),i("mt-field",{attrs:{label:"标题",attr:{maxlength:30},placeholder:"输入晒单标题"},model:{value:t.addItem.title,callback:function(e){t.$set(t.addItem,"title",e)},expression:"addItem.title"}}),t._v(" "),i("mt-field",{attrs:{label:"内容",attr:{maxlength:100},type:"textarea",rows:"3",placeholder:"输入内容"},model:{value:t.addItem.context,callback:function(e){t.$set(t.addItem,"context",e)},expression:"addItem.context"}}),t._v(" "),i("mt-cell",[i("div",{attrs:{slot:"title"},slot:"title"},[t._v("图片")]),t._v(" "),i("input",{ref:"uploadInput",staticStyle:{display:"none"},attrs:{type:"file",multiple:""},on:{change:function(e){t.upload(e)}}}),t._v(" "),t.addItem.pictureList.length<3?i("mt-button",{attrs:{size:"small",type:"danger",loading:t.uploading},on:{click:function(e){t.$refs.uploadInput.click()}}},[t._v("上传图片\n        ")]):t._e()],1),t._v(" "),t._l(t.addItem.pictureList,function(e,a){return i("mt-cell",{key:e},[i("div",{staticStyle:{width:"40%","max-width":"200px",display:"inline-block","margin-top":"20px"},attrs:{slot:"title"},slot:"title"},[i("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.$api.file.see(e),onerror:"this.src='static/icon/icon-appear.svg'",alt:""}})]),t._v(" "),i("mt-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){t.addItem.pictureList.splice(a,1)}}},[t._v("删除\n        ")])],1)})],2),t._v(" "),i("mt-button",{staticStyle:{width:"80%",margin:"auto",display:"block"},attrs:{loading:t.submitting,size:"small",type:"danger"},on:{click:t.submit}},[t._v("提交\n    ")])],1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"media-img"},[i("img",{attrs:{src:"static/icon/icon-pai-on.svg",alt:""}})])}]}}});