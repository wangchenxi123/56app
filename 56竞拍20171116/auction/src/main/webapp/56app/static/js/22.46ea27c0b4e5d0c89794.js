webpackJsonp([22],{128:function(e,t,i){i(316);var o=i(6)(i(233),i(365),null,null);e.exports=o.exports},233:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"messageList",data:function(){return{minHeight:"",title:"",type:"",query:{pageNo:1,pageSize:10},loading:!0,loadType:"REFRESH",resource:{content:[],last:!1}}},beforeRouteEnter:function(e,t,i){i(function(e){"messageInfo"!==t.name&&(e.query.pageNo=1,e.loadType="REFRESH",e.resource={content:[],last:!1},e.findNotices())})},activated:function(){this.minHeight=window.innerHeight-103,this.loading=!0,this.type=this.$route.query.type,this.type?"system"===this.type?this.title="系统公告":"personal"===this.type&&(this.title="个人通知"):this.$router.go(-1)},deactivated:function(){this.loading=!0},methods:{loadTop:function(){this.loading=!0,this.query.pageNo=1,this.findNotices()},loadMore:function(){this.resource.last||this.loading||(this.query.pageNo++,this.findNotices())},goto:function(e){e.state="READ",this.$router.push({name:"messageInfo",query:{id:e.id}})},findNotices:function(){var e=this;this.loading=!0,"system"===this.type?this.$api.findAnnouncementNotice(this.query,function(t){"LOAD_MORE"===e.loadType&&(t.resource.content=e.resource.content.concat(t.resource.content)),e.resource=t.resource,e.$refs.loadTop.onTopLoaded(),e.loading=!1},function(t){e.$refs.loadTop.onTopLoaded(),e.loading=!1,e.$toast({message:t.message})}):"personal"===this.type&&this.$api.findPersonalNotice(this.query,function(t){"LOAD_MORE"===e.loadType&&(t.resource.content=e.resource.content.concat(t.resource.content)),e.resource=t.resource,e.$refs.loadTop.onTopLoaded(),e.loading=!1},function(t){e.$refs.loadTop.onTopLoaded(),e.loading=!1,e.$toast({message:t.message})})}}}},282:function(e,t,i){t=e.exports=i(111)(!1),t.push([e.i,"div.circle-red{width:10px;height:10px;border-radius:30px;background-color:#ef0000}",""])},316:function(e,t,i){var o=i(282);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i(112)("109206d8",o,!0)},365:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"messageList"}},[i("div",{staticClass:"page-wrap"},[i("div",{staticClass:"page-title"},[i("a",{on:{click:function(t){e.$router.go(-1)}}},[i("i",{staticClass:"icon-back"})]),e._v(" "),i("span",[e._v(e._s(e.title))])]),e._v(" "),i("mt-loadmore",{ref:"loadTop",staticStyle:{"padding-top":"48px"},attrs:{"top-method":e.loadTop}},[i("div",{staticClass:"page-content",staticStyle:{"padding-top":"0px"},style:{minHeight:e.minHeight+"px"}},[i("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadMore,expression:"loadMore"}],attrs:{"infinite-scroll-disabled":e.loading,"infinite-scroll-distance":"10","infinite-scroll-immediate-check":!1}},e._l(e.resource.content,function(t){return i("div",{key:t.id,on:{click:function(i){e.goto(t)}}},[i("mt-cell",{attrs:{title:t.title,label:e.$filter.date(t.time),"is-link":""}},["UNREAD"===t.state?i("div",{staticClass:"circle-red"}):e._e()])],1)})),e._v(" "),e.resource.content.length<=0?i("div",[i("div",{staticStyle:{"text-align":"center",color:"#999999","font-size":"14px",padding:"20px"}},[e._v("\n          暂无通知\n        ")])]):e._e()])])],1)])},staticRenderFns:[]}}});